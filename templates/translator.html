{% extends "base.html" %}

{% block title %}AI ë‰˜ì•™ìŠ¤ ë²ˆì—­ê¸°{% endblock %}

{% block content %}
<div class="container">
    <h2 class="text-center mb-4 fw-bold">ğŸŒ AI ë‰˜ì•™ìŠ¤ ë²ˆì—­ê¸°</h2>
    
    <form method="POST" id="transForm" onsubmit="showLoading()">
        <div class="card p-3 mb-4 bg-light border-0">
            <div class="row g-3 align-items-center">
                
                <div class="col-md-5">
                    <select class="form-select" name="direction">
                        <option value="ko_to_en" {% if selected_direction == 'ko_to_en' %}selected{% endif %}>
                            ğŸ‡°ğŸ‡· í•œêµ­ì–´ â¡ ğŸ‡ºğŸ‡¸ ì˜ì–´ (Korean to English)
                        </option>
                        <option value="en_to_ko" {% if selected_direction == 'en_to_ko' %}selected{% endif %}>
                            ğŸ‡ºğŸ‡¸ ì˜ì–´ â¡ ğŸ‡°ğŸ‡· í•œêµ­ì–´ (English to Korean)
                        </option>
                    </select>
                </div>

                <div class="col-md-5">
                    <select class="form-select" name="tone">
                        <option value="Business (Formal)" {% if selected_tone == 'Business (Formal)' %}selected{% endif %}>
                            ğŸ‘” ë¹„ì¦ˆë‹ˆìŠ¤ (ê²©ì‹ìˆê³  ì •ì¤‘í•˜ê²Œ)
                        </option>
                        <option value="Casual (Friendly)" {% if selected_tone == 'Casual (Friendly)' %}selected{% endif %}>
                            â˜•ï¸ ì¼ìƒ ëŒ€í™” (ì¹œêµ¬ì²˜ëŸ¼ ìì—°ìŠ¤ëŸ½ê²Œ)
                        </option>
                        <option value="Email (Professional)" {% if selected_tone == 'Email (Professional)' %}selected{% endif %}>
                            ğŸ“§ ì´ë©”ì¼ (ëª…í™•í•˜ê³  ê°„ê²°í•˜ê²Œ)
                        </option>
                        <option value="Witty (Creative)" {% if selected_tone == 'Witty (Creative)' %}selected{% endif %}>
                            âœ¨ ë§ˆì¼€íŒ…/SNS (ì¬ì¹˜ìˆê³  í™í•˜ê²Œ)
                        </option>
                    </select>
                </div>

                <div class="col-md-2 d-grid">
                    <button type="submit" id="btnSubmit" class="btn btn-primary">ë²ˆì—­í•˜ê¸°</button>
                    <button type="button" id="btnLoading" class="btn btn-secondary" style="display:none;" disabled>
                        <span class="spinner-border spinner-border-sm"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label fw-bold">ì›ë³¸ í…ìŠ¤íŠ¸</label>
                <textarea class="form-control" name="input_text" rows="12" placeholder="ë²ˆì—­í•  ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." required>{{ input_text }}</textarea>
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label fw-bold text-success">ë²ˆì—­ ê²°ê³¼</label>
                <textarea class="form-control bg-white" id="resultText" rows="12" readonly placeholder="ê²°ê³¼ê°€ ì—¬ê¸°ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.">{% if result %}{{ result }}{% endif %}</textarea>
                
                {% if result %}
                <div class="d-grid mt-2">
                    <button type="button" class="btn btn-outline-success" onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
                </div>
                {% endif %}
            </div>
        </div>
    </form>
</div>

<script>
    // ë¡œë”©ë°” í‘œì‹œ
    function showLoading() {
        document.getElementById('btnSubmit').style.display = 'none';
        document.getElementById('btnLoading').style.display = 'block';
    }

    // ë³µì‚¬ ê¸°ëŠ¥
    function copyResult() {
        const copyText = document.getElementById("resultText");
        copyText.select();
        navigator.clipboard.writeText(copyText.value).then(() => {
            alert("ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        });
    }
</script>
{% endblock %}